(globalThis.TURBOPACK || (globalThis.TURBOPACK = [])).push([typeof document === "object" ? document.currentScript : undefined,
"[project]/si_app copy/app/page.js [app-client] (ecmascript)", ((__turbopack_context__) => {
"use strict";

__turbopack_context__.s([
    "default",
    ()=>__TURBOPACK__default__export__
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/si_app copy/node_modules/next/dist/compiled/react/jsx-dev-runtime.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/si_app copy/node_modules/next/dist/compiled/react/index.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$react$2d$bootstrap$2d$icons$2f$dist$2f$icons$2f$compass$2d$fill$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__CompassFill$3e$__ = __turbopack_context__.i("[project]/si_app copy/node_modules/react-bootstrap-icons/dist/icons/compass-fill.js [app-client] (ecmascript) <export default as CompassFill>");
var __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$react$2d$bootstrap$2d$icons$2f$dist$2f$icons$2f$geo$2d$alt$2d$fill$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__GeoAltFill$3e$__ = __turbopack_context__.i("[project]/si_app copy/node_modules/react-bootstrap-icons/dist/icons/geo-alt-fill.js [app-client] (ecmascript) <export default as GeoAltFill>");
var __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$react$2d$bootstrap$2d$icons$2f$dist$2f$icons$2f$person$2d$fill$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__PersonFill$3e$__ = __turbopack_context__.i("[project]/si_app copy/node_modules/react-bootstrap-icons/dist/icons/person-fill.js [app-client] (ecmascript) <export default as PersonFill>");
var __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$firebase$2f$app$2f$dist$2f$esm$2f$index$2e$esm$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/si_app copy/node_modules/firebase/app/dist/esm/index.esm.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f40$firebase$2f$app$2f$dist$2f$esm$2f$index$2e$esm$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/si_app copy/node_modules/@firebase/app/dist/esm/index.esm.js [app-client] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$firebase$2f$messaging$2f$dist$2f$esm$2f$index$2e$esm$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/si_app copy/node_modules/firebase/messaging/dist/esm/index.esm.js [app-client] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f40$firebase$2f$messaging$2f$dist$2f$esm$2f$index$2e$esm$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/si_app copy/node_modules/@firebase/messaging/dist/esm/index.esm.js [app-client] (ecmascript)");
(()=>{
    const e = new Error("Cannot find module './assets/Cartoon.PNG'");
    e.code = 'MODULE_NOT_FOUND';
    throw e;
})();
(()=>{
    const e = new Error("Cannot find module './App.css'");
    e.code = 'MODULE_NOT_FOUND';
    throw e;
})();
(()=>{
    const e = new Error("Cannot find module './Auth'");
    e.code = 'MODULE_NOT_FOUND';
    throw e;
})();
(()=>{
    const e = new Error("Cannot find module './supabaseClient'");
    e.code = 'MODULE_NOT_FOUND';
    throw e;
})();
(()=>{
    const e = new Error("Cannot find module './MembershipCard'");
    e.code = 'MODULE_NOT_FOUND';
    throw e;
})();
(()=>{
    const e = new Error("Cannot find module './BusinessForm'");
    e.code = 'MODULE_NOT_FOUND';
    throw e;
})();
(()=>{
    const e = new Error("Cannot find module './BusinessProfile'");
    e.code = 'MODULE_NOT_FOUND';
    throw e;
})();
(()=>{
    const e = new Error("Cannot find module './LandingPage'");
    e.code = 'MODULE_NOT_FOUND';
    throw e;
})();
(()=>{
    const e = new Error("Cannot find module './StatenIslandMap'");
    e.code = 'MODULE_NOT_FOUND';
    throw e;
})();
(()=>{
    const e = new Error("Cannot find module './ProfileAndPayment'");
    e.code = 'MODULE_NOT_FOUND';
    throw e;
})();
;
var _s = __turbopack_context__.k.signature(), _s1 = __turbopack_context__.k.signature();
"use client";
;
;
;
;
;
;
;
;
;
;
;
;
;
;
// Firebase configuration - REPLACE WITH YOUR CONFIG
const firebaseConfig = {
    apiKey: "AIzaSyC5NjB_yv61XLqCOazv8WVDooBVDmvQWC8",
    authDomain: "si-app-be948.firebaseapp.com",
    projectId: "si-app-be948",
    storageBucket: "si-app-be948.firebasestorage.app",
    messagingSenderId: "959224695369",
    appId: "1:959224695369:web:96fd41e33c3c60b201cd98",
    measurementId: "G-GK9X2XXJ9P"
};
const navItems = [
    {
        label: "Highlighted Business",
        icon: __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$react$2d$bootstrap$2d$icons$2f$dist$2f$icons$2f$compass$2d$fill$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__CompassFill$3e$__["CompassFill"]
    },
    {
        label: "Map",
        icon: __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$react$2d$bootstrap$2d$icons$2f$dist$2f$icons$2f$geo$2d$alt$2d$fill$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__GeoAltFill$3e$__["GeoAltFill"]
    },
    {
        label: "Display My Card",
        icon: __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$react$2d$bootstrap$2d$icons$2f$dist$2f$icons$2f$person$2d$fill$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__PersonFill$3e$__["PersonFill"]
    },
    {
        label: "Profile and Payment",
        icon: __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$react$2d$bootstrap$2d$icons$2f$dist$2f$icons$2f$person$2d$fill$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__$3c$export__default__as__PersonFill$3e$__["PersonFill"]
    }
];
// OPTIMIZED IMAGE COMPONENT - LOADS ALL AT ONCE
function OptimizedImage({ src, alt, className, onClick }) {
    _s();
    const [isLoading, setIsLoading] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(true);
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
        style: {
            position: 'relative',
            overflow: 'hidden',
            borderRadius: '8px'
        },
        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("img", {
            src: src,
            alt: alt,
            className: className,
            onClick: onClick,
            onLoad: ()=>setIsLoading(false),
            style: {
                opacity: isLoading ? 0.7 : 1,
                transition: 'opacity 0.3s ease-in-out',
                backgroundColor: '#f0f0f0'
            }
        }, void 0, false, {
            fileName: "[project]/si_app copy/app/page.js",
            lineNumber: 41,
            columnNumber: 7
        }, this)
    }, void 0, false, {
        fileName: "[project]/si_app copy/app/page.js",
        lineNumber: 40,
        columnNumber: 5
    }, this);
}
_s(OptimizedImage, "5S7VQ8+9ArWv2AFPIfnY+LwrHeg=");
_c = OptimizedImage;
// Add this function in your App.js component, near your other upload functions
// Function to compress images (reuse your existing compressAndUploadImage or create this)
async function compressImage(file) {
    return new Promise((resolve)=>{
        const reader = new FileReader();
        reader.onload = (e)=>{
            const img = new Image();
            img.onload = ()=>{
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                let width = img.width;
                let height = img.height;
                const maxWidth = 1200;
                const maxHeight = 1200;
                if (width > height) {
                    if (width > maxWidth) {
                        height *= maxWidth / width;
                        width = maxWidth;
                    }
                } else {
                    if (height > maxHeight) {
                        width *= maxHeight / height;
                        height = maxHeight;
                    }
                }
                canvas.width = width;
                canvas.height = height;
                ctx.drawImage(img, 0, 0, width, height);
                canvas.toBlob((blob)=>resolve(blob), 'image/jpeg', 0.85);
            };
            img.src = e.target.result;
        };
        reader.readAsDataURL(file);
    });
}
// Add this function to handle multiple photo uploads
const uploadBusinessPhotos = async (businessId, files)=>{
    if (!files || files.length === 0) return [];
    try {
        console.log('Starting photo upload for business ID:', businessId);
        // Verify business exists
        const { data: existingBusiness, error: checkError } = await supabase.from('businesses').select('id, name, photo_urls').eq('id', businessId).maybeSingle();
        if (!existingBusiness) {
            console.error('Business not found');
            alert('Error: Business not found');
            return [];
        }
        const uploadedUrls = [];
        // Upload each file
        for(let i = 0; i < files.length; i++){
            const file = files[i];
            console.log(`Compressing photo ${i + 1}/${files.length}...`);
            // Compress image
            const compressedBlob = await compressImage(file);
            const compressedFile = new File([
                compressedBlob
            ], file.name, {
                type: 'image/jpeg'
            });
            const fileExt = 'jpg';
            const fileName = `${businessId}-${Date.now()}-${i}.${fileExt}`;
            const filePath = fileName;
            console.log(`Uploading photo ${i + 1}/${files.length} to business-logos bucket:`, filePath);
            // Upload to Supabase Storage
            const { error: uploadError, data: uploadData } = await supabase.storage.from('business-logos').upload(filePath, compressedFile, {
                upsert: true,
                cacheControl: '31536000'
            });
            if (uploadError) {
                console.error(`Upload error for photo ${i + 1}:`, uploadError);
                continue; // Skip this photo and continue with others
            }
            console.log(`Upload ${i + 1} successful:`, uploadData);
            // Get public URL
            const { data: urlData } = supabase.storage.from('business-logos').getPublicUrl(filePath);
            if (urlData?.publicUrl) {
                uploadedUrls.push(urlData.publicUrl);
            }
        }
        if (uploadedUrls.length === 0) {
            alert('No photos were uploaded successfully');
            return [];
        }
        // Update database with new photo URLs
        const currentPhotos = existingBusiness.photo_urls || [];
        const updatedPhotos = [
            ...currentPhotos,
            ...uploadedUrls
        ];
        const { error: updateError, data: updatedBusiness } = await supabase.from('businesses').update({
            photo_urls: updatedPhotos
        }).eq('id', businessId).select();
        if (updateError) {
            console.error('Database update error:', updateError);
            alert('Failed to update database: ' + updateError.message);
            return [];
        }
        console.log('Database updated successfully with new photos');
        alert(`${uploadedUrls.length} photo(s) uploaded successfully!`);
        return uploadedUrls;
    } catch (error) {
        console.error('Error uploading photos:', error);
        alert('Error: ' + error.message);
        return [];
    }
};
// Update your BusinessProfile render to pass the required props:
// IMAGE COMPRESSION UTILITY
async function compressAndUploadImage(file) {
    return new Promise((resolve)=>{
        const reader = new FileReader();
        reader.onload = (e)=>{
            const img = new Image();
            img.onload = ()=>{
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                let width = img.width;
                let height = img.height;
                const maxWidth = 800;
                const maxHeight = 800;
                if (width > height) {
                    if (width > maxWidth) {
                        height *= maxWidth / width;
                        width = maxWidth;
                    }
                } else {
                    if (height > maxHeight) {
                        width *= maxHeight / height;
                        height = maxHeight;
                    }
                }
                canvas.width = width;
                canvas.height = height;
                ctx.drawImage(img, 0, 0, width, height);
                canvas.toBlob((blob)=>resolve(blob), 'image/jpeg', 0.8);
            };
            img.src = e.target.result;
        };
        reader.readAsDataURL(file);
    });
}
function App() {
    _s1();
    const [showSplash, setShowSplash] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(true);
    const [session, setSession] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null);
    const [selectedNav, setSelectedNav] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(navItems[0].label);
    const [searchTerm, setSearchTerm] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])("");
    const [businesses, setBusinesses] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])([]);
    const [justSignedUp, setJustSignedUp] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(false);
    const [selectedBusiness, setSelectedBusiness] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null);
    const [showLanding, setShowLanding] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(false);
    const [zipSearch, setZipSearch] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])("");
    const [isMobile, setIsMobile] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(false);
    const [showRegister, setShowRegister] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(false);
    const [shouldShake, setShouldShake] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(false);
    const [showFilters, setShowFilters] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(false);
    const [displayName, setDisplayName] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])("");
    const [editingName, setEditingName] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])("");
    const [avatarUrl, setAvatarUrl] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])("");
    const [isSaving, setIsSaving] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(false);
    const [saveStatus, setSaveStatus] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null);
    const [uploading, setUploading] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(false);
    const [userFcmToken, setUserFcmToken] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null);
    const [selectedBusinessId, setSelectedBusinessId] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null);
    const [mapPanTo, setMapPanTo] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(null);
    const [sortBy, setSortBy] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])("");
    const [tags, setTags] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])([]);
    const [newTag, setNewTag] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])("");
    const [categoryFilter, setCategoryFilter] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])("");
    const [zipFilter, setZipFilter] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])("");
    const [tagFilter, setTagFilter] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])("");
    const [isAdmin, setIsAdmin] = (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useState"])(false);
    // Initialize Firebase and get FCM token
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "App.useEffect": ()=>{
            const initializeFirebase = {
                "App.useEffect.initializeFirebase": async ()=>{
                    try {
                        let app;
                        if ((0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f40$firebase$2f$app$2f$dist$2f$esm$2f$index$2e$esm$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["getApps"])().length === 0) {
                            app = (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f40$firebase$2f$app$2f$dist$2f$esm$2f$index$2e$esm$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["initializeApp"])(firebaseConfig);
                            console.log('Firebase app initialized');
                        } else {
                            app = (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f40$firebase$2f$app$2f$dist$2f$esm$2f$index$2e$esm$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["getApp"])();
                            console.log('Firebase app already exists');
                        }
                        const messaging = (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f40$firebase$2f$messaging$2f$dist$2f$esm$2f$index$2e$esm$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["getMessaging"])(app);
                        const permission = await Notification.requestPermission();
                        if (permission === 'granted') {
                            console.log('Notification permission granted');
                            const token = await (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f40$firebase$2f$messaging$2f$dist$2f$esm$2f$index$2e$esm$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["getToken"])(messaging, {
                                vapidKey: 'BOgqakg5aBxNszM1Ji6H4ADnNMtexhho5CWWpijJqNxdyD8MtYGSc7ZX3yRz2ybsVs8YIHKi_NZ0mz8zAQ25lQk'
                            });
                            if (token) {
                                console.log('FCM Token:', token);
                                handleFcmTokenReceived(token);
                            } else {
                                console.log('No FCM token received');
                            }
                        } else {
                            console.log('Notification permission denied');
                        }
                        (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f40$firebase$2f$messaging$2f$dist$2f$esm$2f$index$2e$esm$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["onMessage"])(messaging, {
                            "App.useEffect.initializeFirebase": (payload)=>{
                                console.log('Message received in foreground:', payload);
                                if (payload.notification) {
                                    new Notification(payload.notification.title, {
                                        body: payload.notification.body,
                                        icon: payload.notification.icon
                                    });
                                }
                            }
                        }["App.useEffect.initializeFirebase"]);
                    } catch (error) {
                        console.error('Error initializing Firebase messaging:', error);
                    }
                }
            }["App.useEffect.initializeFirebase"];
            initializeFirebase();
        }
    }["App.useEffect"], []);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "App.useEffect": ()=>{
            if (session?.user?.email) {
                const adminEmails = [
                    'serkankalem99@gmail.com'
                ];
                setIsAdmin(adminEmails.includes(session.user.email.toLowerCase()));
            }
        }
    }["App.useEffect"], [
        session
    ]);
    // ULTRA-OPTIMIZED IMAGE URL WITH TRANSFORMS & WEBP
    const getBusinessImage = (business, size = 'small')=>{
        if (business.logo_url && business.logo_url.trim() !== '' && business.logo_url !== '/placeholder.svg' && !business.logo_url.includes('placeholder')) {
            // Determine size parameters
            const sizes = {
                small: {
                    width: 200,
                    height: 200,
                    quality: 75
                },
                medium: {
                    width: 300,
                    height: 300,
                    quality: 80
                },
                large: {
                    width: 500,
                    height: 500,
                    quality: 85
                }
            };
            const sizeParams = sizes[size] || sizes.small;
            // Add image transformation parameters with webp format and higher cache
            return `${business.logo_url}?width=${sizeParams.width}&height=${sizeParams.height}&quality=${sizeParams.quality}&format=webp`;
        }
        return '/placeholder.svg';
    };
    // OPTIMIZED UPLOAD WITH COMPRESSION
    const uploadBusinessLogo = async (businessId, file)=>{
        if (!file) return null;
        try {
            console.log('Starting upload for business ID:', businessId);
            console.log('Business ID type:', typeof businessId);
            const { data: existingBusiness, error: checkError } = await supabase.from('businesses').select('id, name').eq('id', businessId).maybeSingle();
            console.log('Business lookup result:', existingBusiness);
            console.log('Business lookup error:', checkError);
            if (!existingBusiness) {
                console.error('Business not found in database with ID:', businessId);
                alert('Error: Cannot find business in database. ID might be incorrect.');
                return null;
            }
            // Compress image before uploading
            console.log('Compressing image...');
            const compressedBlob = await compressAndUploadImage(file);
            const compressedFile = new File([
                compressedBlob
            ], file.name, {
                type: 'image/jpeg'
            });
            const fileExt = 'jpg';
            const fileName = `${businessId}-${Date.now()}.${fileExt}`;
            const filePath = fileName;
            console.log('Uploading to business-logos bucket:', filePath);
            const { error: uploadError, data: uploadData } = await supabase.storage.from('business-logos').upload(filePath, compressedFile, {
                upsert: true,
                cacheControl: '31536000' // Cache for 1 year
            });
            if (uploadError) {
                console.error('Upload error:', uploadError);
                alert('Upload failed: ' + uploadError.message);
                return null;
            }
            console.log('Upload successful:', uploadData);
            const { data: urlData } = supabase.storage.from('business-logos').getPublicUrl(filePath);
            if (!urlData?.publicUrl) {
                console.error('Failed to get public URL');
                return null;
            }
            console.log('Public URL:', urlData.publicUrl);
            const { error: updateError, data: updatedBusiness } = await supabase.from('businesses').update({
                logo_url: urlData.publicUrl
            }).eq('id', businessId).select();
            if (updateError) {
                console.error('Database update error:', updateError);
                alert('Failed to update database: ' + updateError.message);
                return null;
            }
            console.log('Database updated successfully:', updatedBusiness);
            if (!updatedBusiness || updatedBusiness.length === 0) {
                console.error('No business found with ID:', businessId);
                alert('Error: Business not found in database');
                return null;
            }
            alert('Logo uploaded successfully!');
            return urlData.publicUrl;
        } catch (error) {
            console.error('Error uploading logo:', error);
            alert('Error: ' + error.message);
            return null;
        }
    };
    const handleLogoUpload = async (businessId, file)=>{
        if (!file) return;
        setBusinesses((prev)=>prev.map((biz)=>biz.id === businessId ? {
                    ...biz,
                    uploading: true
                } : biz));
        const logoUrl = await uploadBusinessLogo(businessId, file);
        if (logoUrl) {
            setBusinesses((prev)=>prev.map((biz)=>biz.id === businessId ? {
                        ...biz,
                        logo_url: logoUrl,
                        uploading: false
                    } : biz));
            await fetchBusinesses();
        } else {
            setBusinesses((prev)=>prev.map((biz)=>biz.id === businessId ? {
                        ...biz,
                        uploading: false
                    } : biz));
        }
    };
    const handleNavClick = (label)=>{
        if (label === "Display My Card") {
            setShouldShake(true);
            setTimeout(()=>setShouldShake(false), 600);
        }
        setSelectedNav(label);
    };
    const handleBusinessSelect = (e)=>{
        const businessId = e.target.value;
        setSelectedBusinessId(businessId);
        const business = businesses.find((biz)=>biz.id === businessId);
        if (business && business.latitude && business.longitude) {
            setMapPanTo({
                lat: Number.parseFloat(business.latitude),
                lng: Number.parseFloat(business.longitude)
            });
        }
    };
    const handleFcmTokenReceived = (token)=>{
        console.log('FCM token received and set:', token);
        setUserFcmToken(token);
    };
    const handleAddBusiness = async (newBusiness)=>{
        setBusinesses((prev)=>[
                newBusiness,
                ...prev
            ]);
        setSelectedNav("Highlighted Business");
        notifyNewBusiness(newBusiness, userFcmToken);
    };
    async function notifyNewBusiness(newBusiness, userFcmToken) {
        if (!userFcmToken) {
            console.warn('No FCM token available for notifications');
            return;
        }
        try {
            console.log('Sending notification with token:', userFcmToken);
            const response = await fetch("/api/send-notification", {
                method: "POST",
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify({
                    fcmToken: userFcmToken,
                    title: "New Business Added!",
                    body: `${newBusiness.name} just joined our app!`
                })
            });
            if (!response.ok) {
                const errorText = await response.text();
                console.error(`Notification send failed: ${response.status}`, errorText);
                return;
            }
            const data = await response.json();
            console.log("Notification sent successfully:", data);
        } catch (error) {
            console.error("Error sending notification:", error);
        }
    }
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "App.useEffect": ()=>{
            const checkMobile = {
                "App.useEffect.checkMobile": ()=>{
                    setIsMobile(window.innerWidth < 768 || /Mobi|Android/i.test(navigator.userAgent));
                }
            }["App.useEffect.checkMobile"];
            checkMobile();
            window.addEventListener("resize", checkMobile);
            return ({
                "App.useEffect": ()=>window.removeEventListener("resize", checkMobile)
            })["App.useEffect"];
        }
    }["App.useEffect"], []);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "App.useEffect": ()=>{
            const timer = setTimeout({
                "App.useEffect.timer": ()=>{
                    setShowSplash(false);
                    setShowLanding(true);
                }
            }["App.useEffect.timer"], 2000);
            return ({
                "App.useEffect": ()=>clearTimeout(timer)
            })["App.useEffect"];
        }
    }["App.useEffect"], []);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "App.useEffect": ()=>{
            supabase.auth.getSession().then({
                "App.useEffect": ({ data: { session } })=>setSession(session)
            }["App.useEffect"]);
            const { data } = supabase.auth.onAuthStateChange({
                "App.useEffect": (_event, session)=>{
                    setSession(session);
                }
            }["App.useEffect"]);
            return ({
                "App.useEffect": ()=>{
                    if (data?.subscription?.unsubscribe) {
                        data.subscription.unsubscribe();
                    }
                }
            })["App.useEffect"];
        }
    }["App.useEffect"], []);
    // OPTIMIZED FETCH - PARALLEL LOADING WITH CACHING
    const fetchBusinesses = async ()=>{
        console.log('Fetching businesses from database...');
        const { data, error } = await supabase.from("businesses").select("*").order("created_at", {
            ascending: false
        });
        if (!error && data) {
            console.log('Fetched businesses:', data.length);
            setBusinesses(data);
            // Preload images in parallel for faster rendering
            preloadImages(data);
        } else if (error) {
            console.error('Error fetching businesses:', error);
        }
    };
    // Preload all images in parallel
    const preloadImages = (businessList)=>{
        businessList.forEach((business)=>{
            const img = new Image();
            img.src = getBusinessImage(business, 'small');
        });
    };
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "App.useEffect": ()=>{
            fetchBusinesses();
        }
    }["App.useEffect"], []);
    (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$index$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["useEffect"])({
        "App.useEffect": ()=>{
            if (session?.user) {
                const metadata = session.user.user_metadata || {};
                setDisplayName(metadata.display_name || "");
                setEditingName(metadata.display_name || "");
                setAvatarUrl(metadata.avatar_url || "");
            }
        }
    }["App.useEffect"], [
        session
    ]);
    const saveName = async ()=>{
        setIsSaving(true);
        setSaveStatus(null);
        const { data, error } = await supabase.auth.updateUser({
            data: {
                display_name: editingName,
                avatar_url: avatarUrl
            }
        });
        if (!error && data?.user) {
            setDisplayName(editingName);
            setSession((prev)=>({
                    ...prev,
                    user: data.user
                }));
            setSaveStatus("success");
        } else {
            setSaveStatus("error");
        }
        setIsSaving(false);
    };
    const handleFileUpload = async (e)=>{
        const file = e.target.files[0];
        if (!file || !session?.user?.id) return;
        setUploading(true);
        const fileExt = file.name.split(".").pop();
        const filePath = `avatars/${session.user.id}-${Date.now()}.${fileExt}`;
        const { error: uploadError } = await supabase.storage.from("avatars").upload(filePath, file, {
            upsert: true
        });
        if (uploadError) {
            setUploading(false);
            setSaveStatus("error");
            return;
        }
        const { data: urlData } = supabase.storage.from("avatars").getPublicUrl(filePath);
        const publicUrl = urlData?.publicUrl || "";
        if (!publicUrl) {
            setUploading(false);
            setSaveStatus("error");
            return;
        }
        const { error: metaErr, data: updated } = await supabase.auth.updateUser({
            data: {
                display_name: editingName || displayName,
                avatar_url: publicUrl
            }
        });
        if (!metaErr && updated?.user) {
            setAvatarUrl(publicUrl);
            setSession((prev)=>({
                    ...prev,
                    user: updated.user
                }));
            setSaveStatus("success");
        } else {
            setSaveStatus("error");
        }
        setUploading(false);
    };
    const handleLogout = async ()=>{
        const { error } = await supabase.auth.signOut();
        if (!error) {
            setSession(null);
            setDisplayName("");
            setEditingName("");
            setAvatarUrl("");
            setSelectedNav(navItems[0].label);
        }
    };
    if (showSplash) {
        return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
            className: "splash-screen",
            children: [
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                    className: "sparkle sparkle-1",
                    children: "✦"
                }, void 0, false, {
                    fileName: "[project]/si_app copy/app/page.js",
                    lineNumber: 659,
                    columnNumber: 9
                }, this),
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                    className: "sparkle sparkle-2",
                    children: "✧"
                }, void 0, false, {
                    fileName: "[project]/si_app copy/app/page.js",
                    lineNumber: 660,
                    columnNumber: 9
                }, this),
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                    className: "sparkle sparkle-3",
                    children: "✦"
                }, void 0, false, {
                    fileName: "[project]/si_app copy/app/page.js",
                    lineNumber: 661,
                    columnNumber: 9
                }, this),
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                    className: "decorative-circle"
                }, void 0, false, {
                    fileName: "[project]/si_app copy/app/page.js",
                    lineNumber: 662,
                    columnNumber: 9
                }, this),
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                    className: "logo-container",
                    children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("img", {
                        src: logo || "/placeholder.svg",
                        alt: "App logo",
                        className: "splash-logo"
                    }, void 0, false, {
                        fileName: "[project]/si_app copy/app/page.js",
                        lineNumber: 664,
                        columnNumber: 11
                    }, this)
                }, void 0, false, {
                    fileName: "[project]/si_app copy/app/page.js",
                    lineNumber: 663,
                    columnNumber: 9
                }, this),
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                    className: "splash-tagline"
                }, void 0, false, {
                    fileName: "[project]/si_app copy/app/page.js",
                    lineNumber: 666,
                    columnNumber: 9
                }, this)
            ]
        }, void 0, true, {
            fileName: "[project]/si_app copy/app/page.js",
            lineNumber: 658,
            columnNumber: 7
        }, this);
    }
    if (showLanding && !session) {
        return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(LandingPage, {
            onLoginClick: ()=>{
                setShowLanding(false);
                setShowRegister(false);
            },
            onGetStarted: ()=>{
                setShowLanding(false);
                setShowRegister(true);
            }
        }, void 0, false, {
            fileName: "[project]/si_app copy/app/page.js",
            lineNumber: 673,
            columnNumber: 7
        }, this);
    }
    if (!session) {
        return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(Auth, {
            onAuthSuccess: (_data, isSignUp)=>{
                supabase.auth.getSession().then(({ data: { session } })=>{
                    setSession(session);
                    if (isSignUp) setJustSignedUp(true);
                });
            },
            isLoginProp: !showRegister
        }, void 0, false, {
            fileName: "[project]/si_app copy/app/page.js",
            lineNumber: 688,
            columnNumber: 7
        }, this);
    }
    if (justSignedUp) {
        return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
            style: {
                width: "100vw",
                margin: 0,
                padding: 16,
                boxSizing: "border-box"
            },
            children: [
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("h2", {
                    children: "Welcome to Staten Island!"
                }, void 0, false, {
                    fileName: "[project]/si_app copy/app/page.js",
                    lineNumber: 703,
                    columnNumber: 9
                }, this),
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(MembershipCard, {
                    email: session.user.email,
                    name: displayName,
                    avatar: avatarUrl,
                    style: {
                        width: "100%",
                        maxWidth: "100%"
                    }
                }, void 0, false, {
                    fileName: "[project]/si_app copy/app/page.js",
                    lineNumber: 704,
                    columnNumber: 9
                }, this),
                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("button", {
                    onClick: ()=>setJustSignedUp(false),
                    style: {
                        marginTop: 24,
                        padding: "12px 24px",
                        backgroundColor: "#007acc",
                        color: "#fff",
                        border: "none",
                        borderRadius: 8,
                        fontWeight: "600",
                        cursor: "pointer",
                        transition: "background 0.3s",
                        width: "100%",
                        maxWidth: 400,
                        display: "block"
                    },
                    onMouseEnter: (e)=>e.target.style.backgroundColor = "#005fa3",
                    onMouseLeave: (e)=>e.target.style.backgroundColor = "#007acc",
                    children: "Continue to App"
                }, void 0, false, {
                    fileName: "[project]/si_app copy/app/page.js",
                    lineNumber: 710,
                    columnNumber: 9
                }, this)
            ]
        }, void 0, true, {
            fileName: "[project]/si_app copy/app/page.js",
            lineNumber: 702,
            columnNumber: 7
        }, this);
    }
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
        children: [
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("style", {
                children: `
          @keyframes pulse {
            0%, 100% { opacity: 0.6; }
            50% { opacity: 1; }
          }
        `
            }, void 0, false, {
                fileName: "[project]/si_app copy/app/page.js",
                lineNumber: 737,
                columnNumber: 7
            }, this),
            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                style: {
                    display: "flex",
                    flexDirection: "column",
                    height: "100vh"
                },
                children: [
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("main", {
                        style: {
                            flex: 1,
                            padding: 0,
                            overflowY: "auto"
                        },
                        children: selectedNav === "Display My Card" ? /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                            style: {
                                padding: "40px 20px",
                                margin: 0,
                                width: "100vw",
                                minHeight: "calc(100vh - 60px)",
                                backgroundColor: "#ffffff",
                                display: "flex",
                                flexDirection: "column",
                                alignItems: "center",
                                justifyContent: "flex-start",
                                textAlign: "center",
                                boxSizing: "border-box"
                            },
                            children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(MembershipCard, {
                                email: session.user.email,
                                name: displayName,
                                avatar: avatarUrl,
                                shouldShake: shouldShake,
                                style: {
                                    width: "100%",
                                    maxWidth: 400,
                                    margin: "0 auto"
                                }
                            }, void 0, false, {
                                fileName: "[project]/si_app copy/app/page.js",
                                lineNumber: 763,
                                columnNumber: 7
                            }, this)
                        }, void 0, false, {
                            fileName: "[project]/si_app copy/app/page.js",
                            lineNumber: 748,
                            columnNumber: 5
                        }, this) : selectedNav === "Add Your Business" ? /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(BusinessForm, {
                            onAddBusiness: handleAddBusiness
                        }, void 0, false, {
                            fileName: "[project]/si_app copy/app/page.js",
                            lineNumber: 772,
                            columnNumber: 5
                        }, this) : selectedNav === "Map" ? /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                            style: {
                                height: "100vh",
                                display: "flex",
                                flexDirection: "column"
                            },
                            children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                style: {
                                    flexGrow: 1
                                },
                                children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(StatenIslandMap, {
                                    businesses: businesses
                                }, void 0, false, {
                                    fileName: "[project]/si_app copy/app/page.js",
                                    lineNumber: 776,
                                    columnNumber: 9
                                }, this)
                            }, void 0, false, {
                                fileName: "[project]/si_app copy/app/page.js",
                                lineNumber: 775,
                                columnNumber: 7
                            }, this)
                        }, void 0, false, {
                            fileName: "[project]/si_app copy/app/page.js",
                            lineNumber: 774,
                            columnNumber: 5
                        }, this) : selectedNav === "Profile and Payment" ? /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                            className: "profile-page-backdrop",
                            children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(ProfileAndPayment, {
                                session: session,
                                displayName: displayName,
                                onSaveName: saveName,
                                editingName: editingName,
                                setEditingName: setEditingName,
                                isSaving: isSaving,
                                saveStatus: saveStatus,
                                onLogout: handleLogout
                            }, void 0, false, {
                                fileName: "[project]/si_app copy/app/page.js",
                                lineNumber: 781,
                                columnNumber: 7
                            }, this)
                        }, void 0, false, {
                            fileName: "[project]/si_app copy/app/page.js",
                            lineNumber: 780,
                            columnNumber: 5
                        }, this) : selectedNav === "Highlighted Business" ? /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                            children: [
                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                    className: "highlighted-business-container",
                                    children: [
                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                            className: "highlighted-business-header",
                                            children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("h2", {
                                                children: [
                                                    "Hello, ",
                                                    displayName || "Guest",
                                                    "!"
                                                ]
                                            }, void 0, true, {
                                                fileName: "[project]/si_app copy/app/page.js",
                                                lineNumber: 796,
                                                columnNumber: 11
                                            }, this)
                                        }, void 0, false, {
                                            fileName: "[project]/si_app copy/app/page.js",
                                            lineNumber: 795,
                                            columnNumber: 9
                                        }, this),
                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                            className: "highlighted-search-container",
                                            children: [
                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                                                    children: "🔍"
                                                }, void 0, false, {
                                                    fileName: "[project]/si_app copy/app/page.js",
                                                    lineNumber: 799,
                                                    columnNumber: 11
                                                }, this),
                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("input", {
                                                    type: "text",
                                                    placeholder: "Search businesses...",
                                                    value: searchTerm,
                                                    onChange: (e)=>setSearchTerm(e.target.value)
                                                }, void 0, false, {
                                                    fileName: "[project]/si_app copy/app/page.js",
                                                    lineNumber: 800,
                                                    columnNumber: 11
                                                }, this)
                                            ]
                                        }, void 0, true, {
                                            fileName: "[project]/si_app copy/app/page.js",
                                            lineNumber: 798,
                                            columnNumber: 9
                                        }, this)
                                    ]
                                }, void 0, true, {
                                    fileName: "[project]/si_app copy/app/page.js",
                                    lineNumber: 794,
                                    columnNumber: 7
                                }, this),
                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                    className: "highlighted-filter-bar",
                                    children: [
                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                            className: "filter-controls-row",
                                            children: [
                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("select", {
                                                    value: sortBy,
                                                    onChange: (e)=>setSortBy(e.target.value),
                                                    children: [
                                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("option", {
                                                            value: "",
                                                            children: "Sort By"
                                                        }, void 0, false, {
                                                            fileName: "[project]/si_app copy/app/page.js",
                                                            lineNumber: 811,
                                                            columnNumber: 13
                                                        }, this),
                                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("option", {
                                                            value: "az",
                                                            children: "A → Z"
                                                        }, void 0, false, {
                                                            fileName: "[project]/si_app copy/app/page.js",
                                                            lineNumber: 812,
                                                            columnNumber: 13
                                                        }, this),
                                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("option", {
                                                            value: "za",
                                                            children: "Z → A"
                                                        }, void 0, false, {
                                                            fileName: "[project]/si_app copy/app/page.js",
                                                            lineNumber: 813,
                                                            columnNumber: 13
                                                        }, this),
                                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("option", {
                                                            value: "oldest",
                                                            children: "Oldest → Newest"
                                                        }, void 0, false, {
                                                            fileName: "[project]/si_app copy/app/page.js",
                                                            lineNumber: 814,
                                                            columnNumber: 13
                                                        }, this),
                                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("option", {
                                                            value: "newest",
                                                            children: "Newest → Oldest"
                                                        }, void 0, false, {
                                                            fileName: "[project]/si_app copy/app/page.js",
                                                            lineNumber: 815,
                                                            columnNumber: 13
                                                        }, this),
                                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("option", {
                                                            value: "rating",
                                                            children: "Highest Rating"
                                                        }, void 0, false, {
                                                            fileName: "[project]/si_app copy/app/page.js",
                                                            lineNumber: 816,
                                                            columnNumber: 13
                                                        }, this)
                                                    ]
                                                }, void 0, true, {
                                                    fileName: "[project]/si_app copy/app/page.js",
                                                    lineNumber: 810,
                                                    columnNumber: 11
                                                }, this),
                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("select", {
                                                    value: zipSearch,
                                                    onChange: (e)=>setZipSearch(e.target.value),
                                                    children: [
                                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("option", {
                                                            value: "",
                                                            children: "📍 Search by Zip"
                                                        }, void 0, false, {
                                                            fileName: "[project]/si_app copy/app/page.js",
                                                            lineNumber: 819,
                                                            columnNumber: 13
                                                        }, this),
                                                        [
                                                            ...new Set(businesses.map((biz)=>biz.zip_code))
                                                        ].map((zip, idx)=>zip && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("option", {
                                                                value: zip,
                                                                children: zip
                                                            }, idx, false, {
                                                                fileName: "[project]/si_app copy/app/page.js",
                                                                lineNumber: 823,
                                                                columnNumber: 19
                                                            }, this))
                                                    ]
                                                }, void 0, true, {
                                                    fileName: "[project]/si_app copy/app/page.js",
                                                    lineNumber: 818,
                                                    columnNumber: 11
                                                }, this),
                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                    className: "highlighted-tag-input",
                                                    children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("input", {
                                                        type: "text",
                                                        placeholder: " 🏷️ Add tag...",
                                                        value: newTag,
                                                        onChange: (e)=>setNewTag(e.target.value),
                                                        onKeyDown: (e)=>{
                                                            if (e.key === "Enter" && newTag.trim()) {
                                                                setTags([
                                                                    ...tags,
                                                                    newTag.trim()
                                                                ]);
                                                                setNewTag("");
                                                            }
                                                        }
                                                    }, void 0, false, {
                                                        fileName: "[project]/si_app copy/app/page.js",
                                                        lineNumber: 830,
                                                        columnNumber: 13
                                                    }, this)
                                                }, void 0, false, {
                                                    fileName: "[project]/si_app copy/app/page.js",
                                                    lineNumber: 829,
                                                    columnNumber: 11
                                                }, this)
                                            ]
                                        }, void 0, true, {
                                            fileName: "[project]/si_app copy/app/page.js",
                                            lineNumber: 809,
                                            columnNumber: 9
                                        }, this),
                                        tags.length > 0 && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                            className: "highlighted-tags-list",
                                            children: tags.map((tag, idx)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                                                    children: [
                                                        tag,
                                                        /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("button", {
                                                            onClick: ()=>setTags(tags.filter((_, i)=>i !== idx)),
                                                            children: "✕"
                                                        }, void 0, false, {
                                                            fileName: "[project]/si_app copy/app/page.js",
                                                            lineNumber: 849,
                                                            columnNumber: 17
                                                        }, this)
                                                    ]
                                                }, idx, true, {
                                                    fileName: "[project]/si_app copy/app/page.js",
                                                    lineNumber: 847,
                                                    columnNumber: 15
                                                }, this))
                                        }, void 0, false, {
                                            fileName: "[project]/si_app copy/app/page.js",
                                            lineNumber: 845,
                                            columnNumber: 11
                                        }, this)
                                    ]
                                }, void 0, true, {
                                    fileName: "[project]/si_app copy/app/page.js",
                                    lineNumber: 808,
                                    columnNumber: 7
                                }, this),
                                businesses.filter((biz)=>{
                                    const matchesSearch = (biz.name || "").toLowerCase().includes(searchTerm.toLowerCase()) || (biz.description || "").toLowerCase().includes(searchTerm.toLowerCase());
                                    const matchesTag = tags.length === 0 || Array.isArray(biz.tags) && tags.some((t)=>biz.tags.some((tag)=>tag.toLowerCase() === t.toLowerCase()));
                                    const matchesZip = !zipSearch || biz.zip_code && biz.zip_code.toString().startsWith(zipSearch.trim());
                                    return matchesSearch && matchesTag && matchesZip;
                                }).sort((a, b)=>{
                                    if (sortBy === "az") return a.name.localeCompare(b.name);
                                    if (sortBy === "za") return b.name.localeCompare(a.name);
                                    if (sortBy === "oldest") return a.id - b.id;
                                    if (sortBy === "newest") return b.id - a.id;
                                    if (sortBy === "rating") return (b.rating || 0) - (a.rating || 0);
                                    return 0;
                                }).map((biz)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                        className: "highlighted-business-card",
                                        onClick: ()=>setSelectedBusiness(biz),
                                        style: {
                                            cursor: "pointer"
                                        },
                                        children: [
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                style: {
                                                    position: "relative"
                                                },
                                                children: [
                                                    biz.uploading && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                        style: {
                                                            position: "absolute",
                                                            top: 0,
                                                            left: 0,
                                                            right: 0,
                                                            bottom: 0,
                                                            display: "flex",
                                                            alignItems: "center",
                                                            justifyContent: "center",
                                                            backgroundColor: "rgba(255,255,255,0.8)",
                                                            borderRadius: "8px",
                                                            zIndex: 10
                                                        },
                                                        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                            children: "Uploading..."
                                                        }, void 0, false, {
                                                            fileName: "[project]/si_app copy/app/page.js",
                                                            lineNumber: 906,
                                                            columnNumber: 19
                                                        }, this)
                                                    }, void 0, false, {
                                                        fileName: "[project]/si_app copy/app/page.js",
                                                        lineNumber: 891,
                                                        columnNumber: 17
                                                    }, this),
                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(OptimizedImage, {
                                                        src: getBusinessImage(biz),
                                                        alt: biz.name,
                                                        className: "highlighted-business-logo",
                                                        onClick: (e)=>{
                                                            e.stopPropagation();
                                                            setSelectedBusiness(biz);
                                                        }
                                                    }, void 0, false, {
                                                        fileName: "[project]/si_app copy/app/page.js",
                                                        lineNumber: 909,
                                                        columnNumber: 15
                                                    }, this),
                                                    isAdmin && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("label", {
                                                        style: {
                                                            position: "absolute",
                                                            bottom: -8,
                                                            right: -8,
                                                            backgroundColor: "#1e3a8a",
                                                            color: "white",
                                                            borderRadius: "50%",
                                                            width: 28,
                                                            height: 28,
                                                            display: "flex",
                                                            alignItems: "center",
                                                            justifyContent: "center",
                                                            cursor: "pointer",
                                                            fontSize: "14px",
                                                            boxShadow: "0 2px 6px rgba(0,0,0,0.2)"
                                                        },
                                                        onClick: (e)=>e.stopPropagation(),
                                                        children: [
                                                            "📷",
                                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("input", {
                                                                type: "file",
                                                                accept: "image/*",
                                                                style: {
                                                                    display: "none"
                                                                },
                                                                onChange: (e)=>{
                                                                    if (e.target.files?.[0]) {
                                                                        handleLogoUpload(biz.id, e.target.files[0]);
                                                                    }
                                                                }
                                                            }, void 0, false, {
                                                                fileName: "[project]/si_app copy/app/page.js",
                                                                lineNumber: 939,
                                                                columnNumber: 19
                                                            }, this)
                                                        ]
                                                    }, void 0, true, {
                                                        fileName: "[project]/si_app copy/app/page.js",
                                                        lineNumber: 919,
                                                        columnNumber: 17
                                                    }, this)
                                                ]
                                            }, void 0, true, {
                                                fileName: "[project]/si_app copy/app/page.js",
                                                lineNumber: 889,
                                                columnNumber: 13
                                            }, this),
                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                className: "highlighted-business-content",
                                                children: [
                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                        className: "highlighted-business-name",
                                                        children: biz.name
                                                    }, void 0, false, {
                                                        fileName: "[project]/si_app copy/app/page.js",
                                                        lineNumber: 954,
                                                        columnNumber: 15
                                                    }, this),
                                                    biz.description && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                        className: "highlighted-business-description",
                                                        children: biz.description
                                                    }, void 0, false, {
                                                        fileName: "[project]/si_app copy/app/page.js",
                                                        lineNumber: 956,
                                                        columnNumber: 17
                                                    }, this),
                                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                        style: {
                                                            display: "flex",
                                                            alignItems: "center",
                                                            gap: 4
                                                        },
                                                        onClick: (e)=>e.stopPropagation(),
                                                        children: [
                                                            [
                                                                1,
                                                                2,
                                                                3,
                                                                4,
                                                                5
                                                            ].map((star)=>/*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                                                                    onClick: async (e)=>{
                                                                        e.stopPropagation();
                                                                        if (!session?.user) {
                                                                            alert("Please sign in to rate this business.");
                                                                            return;
                                                                        }
                                                                        try {
                                                                            const { error: insertError } = await supabase.from("reviews").insert({
                                                                                business_id: biz.id,
                                                                                user_id: session.user.id,
                                                                                rating: star
                                                                            });
                                                                            if (insertError) throw insertError;
                                                                            const { data: allReviews, error: fetchError } = await supabase.from("reviews").select("rating").eq("business_id", biz.id);
                                                                            if (fetchError) throw fetchError;
                                                                            const total = allReviews.length;
                                                                            const avg = total > 0 ? allReviews.reduce((a, r)=>a + r.rating, 0) / total : 0;
                                                                            const { error: updateError } = await supabase.from("businesses").update({
                                                                                rating: avg.toFixed(1),
                                                                                review_count: total
                                                                            }).eq("id", biz.id);
                                                                            if (updateError) throw updateError;
                                                                            // Update local state instantly
                                                                            setBusinesses((prev)=>prev.map((b)=>b.id === biz.id ? {
                                                                                        ...b,
                                                                                        rating: avg.toFixed(1),
                                                                                        review_count: total
                                                                                    } : b));
                                                                        } catch (err) {
                                                                            console.error("Rating error:", err);
                                                                            alert("Error submitting your rating.");
                                                                        }
                                                                    },
                                                                    style: {
                                                                        color: (biz.rating || 0) >= star ? "#f59e0b" : "#ccc",
                                                                        fontSize: 18,
                                                                        cursor: "pointer"
                                                                    },
                                                                    children: "★"
                                                                }, star, false, {
                                                                    fileName: "[project]/si_app copy/app/page.js",
                                                                    lineNumber: 967,
                                                                    columnNumber: 19
                                                                }, this)),
                                                            /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                                                                style: {
                                                                    fontSize: 13,
                                                                    color: "#f59e0b",
                                                                    fontWeight: 500
                                                                },
                                                                children: [
                                                                    biz.rating || " 0.0",
                                                                    " (",
                                                                    biz.review_count || 0,
                                                                    ")"
                                                                ]
                                                            }, void 0, true, {
                                                                fileName: "[project]/si_app copy/app/page.js",
                                                                lineNumber: 1030,
                                                                columnNumber: 17
                                                            }, this)
                                                        ]
                                                    }, void 0, true, {
                                                        fileName: "[project]/si_app copy/app/page.js",
                                                        lineNumber: 962,
                                                        columnNumber: 15
                                                    }, this),
                                                    Array.isArray(biz.tags) && biz.tags.length > 0 && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                                        className: "highlighted-business-tags",
                                                        children: /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                                                            className: "highlighted-tag-pill",
                                                            children: [
                                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                                                                    children: "🏷️"
                                                                }, void 0, false, {
                                                                    fileName: "[project]/si_app copy/app/page.js",
                                                                    lineNumber: 1039,
                                                                    columnNumber: 21
                                                                }, this),
                                                                /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                                                                    children: biz.tags[0]
                                                                }, void 0, false, {
                                                                    fileName: "[project]/si_app copy/app/page.js",
                                                                    lineNumber: 1040,
                                                                    columnNumber: 21
                                                                }, this)
                                                            ]
                                                        }, void 0, true, {
                                                            fileName: "[project]/si_app copy/app/page.js",
                                                            lineNumber: 1038,
                                                            columnNumber: 19
                                                        }, this)
                                                    }, void 0, false, {
                                                        fileName: "[project]/si_app copy/app/page.js",
                                                        lineNumber: 1037,
                                                        columnNumber: 17
                                                    }, this)
                                                ]
                                            }, void 0, true, {
                                                fileName: "[project]/si_app copy/app/page.js",
                                                lineNumber: 953,
                                                columnNumber: 13
                                            }, this)
                                        ]
                                    }, biz.id, true, {
                                        fileName: "[project]/si_app copy/app/page.js",
                                        lineNumber: 883,
                                        columnNumber: 11
                                    }, this))
                            ]
                        }, void 0, true, {
                            fileName: "[project]/si_app copy/app/page.js",
                            lineNumber: 793,
                            columnNumber: 5
                        }, this) : /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {}, void 0, false, {
                            fileName: "[project]/si_app copy/app/page.js",
                            lineNumber: 1049,
                            columnNumber: 5
                        }, this)
                    }, void 0, false, {
                        fileName: "[project]/si_app copy/app/page.js",
                        lineNumber: 746,
                        columnNumber: 7
                    }, this),
                    selectedBusiness && /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(BusinessProfile, {
                        business: selectedBusiness,
                        onClose: ()=>setSelectedBusiness(null),
                        isAdmin: isAdmin,
                        onPhotosUpdate: uploadBusinessPhotos
                    }, void 0, false, {
                        fileName: "[project]/si_app copy/app/page.js",
                        lineNumber: 1053,
                        columnNumber: 3
                    }, this),
                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("nav", {
                        style: {
                            display: "flex",
                            justifyContent: "space-around",
                            backgroundColor: "#darkblue",
                            padding: "8px 4px",
                            borderTop: "1px solid #ccc",
                            minHeight: "60px"
                        },
                        children: navItems.map(({ label, icon: Icon })=>{
                            const isSelected = selectedNav === label;
                            const shortLabel = label === "Highlighted Business" ? "Businesses " : label === "Display My Card" ? "My Card" : label === "Profile and Payment" ? "Profile" : label;
                            return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("div", {
                                onClick: ()=>handleNavClick(label),
                                style: {
                                    cursor: "pointer",
                                    padding: "4px 2px",
                                    borderRadius: 6,
                                    display: "flex",
                                    flexDirection: "column",
                                    alignItems: "center",
                                    justifyContent: "center",
                                    color: isSelected ? "darkblue" : "#666",
                                    fontWeight: isSelected ? "bold" : "normal",
                                    transition: "color 0.3s",
                                    flex: 1,
                                    maxWidth: "80px"
                                },
                                children: [
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])(Icon, {
                                        size: 20,
                                        color: isSelected ? "darkblue" : "#666"
                                    }, void 0, false, {
                                        fileName: "[project]/si_app copy/app/page.js",
                                        lineNumber: 1099,
                                        columnNumber: 17
                                    }, this),
                                    /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$si_app__copy$2f$node_modules$2f$next$2f$dist$2f$compiled$2f$react$2f$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$client$5d$__$28$ecmascript$29$__["jsxDEV"])("span", {
                                        style: {
                                            fontSize: "10px",
                                            marginTop: 2,
                                            textAlign: "center",
                                            lineHeight: "12px",
                                            whiteSpace: "nowrap",
                                            overflow: "hidden",
                                            textOverflow: "ellipsis",
                                            maxWidth: "100%"
                                        },
                                        children: shortLabel
                                    }, void 0, false, {
                                        fileName: "[project]/si_app copy/app/page.js",
                                        lineNumber: 1100,
                                        columnNumber: 17
                                    }, this)
                                ]
                            }, label, true, {
                                fileName: "[project]/si_app copy/app/page.js",
                                lineNumber: 1081,
                                columnNumber: 15
                            }, this);
                        })
                    }, void 0, false, {
                        fileName: "[project]/si_app copy/app/page.js",
                        lineNumber: 1060,
                        columnNumber: 9
                    }, this)
                ]
            }, void 0, true, {
                fileName: "[project]/si_app copy/app/page.js",
                lineNumber: 745,
                columnNumber: 7
            }, this)
        ]
    }, void 0, true, {
        fileName: "[project]/si_app copy/app/page.js",
        lineNumber: 736,
        columnNumber: 5
    }, this);
}
_s1(App, "qtByGj7bJ0bgsbNN51cOPBLTCJA=");
_c1 = App;
const __TURBOPACK__default__export__ = App;
var _c, _c1;
__turbopack_context__.k.register(_c, "OptimizedImage");
__turbopack_context__.k.register(_c1, "App");
if (typeof globalThis.$RefreshHelpers$ === 'object' && globalThis.$RefreshHelpers !== null) {
    __turbopack_context__.k.registerExports(__turbopack_context__.m, globalThis.$RefreshHelpers$);
}
}),
]);

//# sourceMappingURL=si_app%20copy_app_page_f6efd9ee.js.map