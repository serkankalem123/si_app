{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 70, "column": 0}, "map": {"version":3,"sources":["file:///Users/enderkalem/si_app%20copy/app/api/create-checkout-session/route.js"],"sourcesContent":["// /app/api/create-checkout-session/route.js\nimport Stripe from \"stripe\";\n\nexport async function POST(request) {\n  try {\n    // Validate environment variable\n    if (!process.env.STRIPE_SECRET_KEY) {\n      console.error(\"STRIPE_SECRET_KEY is not set in environment variables\");\n      return new Response(\n        JSON.stringify({ error: \"Stripe configuration error\" }), \n        { status: 500 }\n      );\n    }\n\n    const stripe = new Stripe(process.env.STRIPE_SECRET_KEY);\n    const { userId, email } = await request.json();\n\n    // Validate input\n    if (!userId || !email) {\n      return new Response(\n        JSON.stringify({ error: \"Missing userId or email\" }), \n        { status: 400 }\n      );\n    }\n\n    const session = await stripe.checkout.sessions.create({\n      customer_email: email,\n      mode: \"subscription\",\n      payment_method_types: [\"card\"],\n      line_items: [\n        {\n          price: \"price_1SBKE5050zwZ92QfEUQtyZw5\",\n          quantity: 1,\n        },\n      ],\n      success_url: `${request.headers.get(\"origin\")}/payment-success`,\n      cancel_url: `${request.headers.get(\"origin\")}/profile`,\n      metadata: { userId },\n    });\n\n    return Response.json({ url: session.url });\n  } catch (err) {\n    console.error(\"Stripe API Error:\", err);\n    return new Response(\n      JSON.stringify({ \n        error: err.message,\n        type: err.type || 'unknown_error'\n      }), \n      { status: 500 }\n    );\n  }\n}"],"names":[],"mappings":"AAAA,4CAA4C;;;;;AAC5C;;AAEO,eAAe,KAAK,OAAO;IAChC,IAAI;QACF,gCAAgC;QAChC,IAAI,CAAC,QAAQ,GAAG,CAAC,iBAAiB,EAAE;YAClC,QAAQ,KAAK,CAAC;YACd,OAAO,IAAI,SACT,KAAK,SAAS,CAAC;gBAAE,OAAO;YAA6B,IACrD;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,SAAS,IAAI,mLAAM,CAAC,QAAQ,GAAG,CAAC,iBAAiB;QACvD,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,QAAQ,IAAI;QAE5C,iBAAiB;QACjB,IAAI,CAAC,UAAU,CAAC,OAAO;YACrB,OAAO,IAAI,SACT,KAAK,SAAS,CAAC;gBAAE,OAAO;YAA0B,IAClD;gBAAE,QAAQ;YAAI;QAElB;QAEA,MAAM,UAAU,MAAM,OAAO,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC;YACpD,gBAAgB;YAChB,MAAM;YACN,sBAAsB;gBAAC;aAAO;YAC9B,YAAY;gBACV;oBACE,OAAO;oBACP,UAAU;gBACZ;aACD;YACD,aAAa,GAAG,QAAQ,OAAO,CAAC,GAAG,CAAC,UAAU,gBAAgB,CAAC;YAC/D,YAAY,GAAG,QAAQ,OAAO,CAAC,GAAG,CAAC,UAAU,QAAQ,CAAC;YACtD,UAAU;gBAAE;YAAO;QACrB;QAEA,OAAO,SAAS,IAAI,CAAC;YAAE,KAAK,QAAQ,GAAG;QAAC;IAC1C,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,qBAAqB;QACnC,OAAO,IAAI,SACT,KAAK,SAAS,CAAC;YACb,OAAO,IAAI,OAAO;YAClB,MAAM,IAAI,IAAI,IAAI;QACpB,IACA;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}