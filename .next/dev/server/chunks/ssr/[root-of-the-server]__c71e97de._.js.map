{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 50, "column": 0}, "map": {"version":3,"sources":["file:///Users/enderkalem/si_app%20copy/src/supabaseClient.js"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = 'https://beegwfvdcxwlxjrffrki.supabase.co';  // Replace with your URL\nconst supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJlZWd3ZnZkY3h3bHhqcmZmcmtpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTI1OTkzNDYsImV4cCI6MjA2ODE3NTM0Nn0.Tz3XhM8ZCFUH_sHbdqVDCxBfvZVjKx7jDafQmtlzvo0';                  // Replace with your public key\n\nexport const supabase = createClient(supabaseUrl, supabaseKey);\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cAAc,4CAA6C,wBAAwB;AACzF,MAAM,cAAc,oNAAqO,+BAA+B;AAEjR,MAAM,WAAW,IAAA,iKAAY,EAAC,aAAa","debugId":null}},
    {"offset": {"line": 65, "column": 0}, "map": {"version":3,"sources":["file:///Users/enderkalem/si_app%20copy/pages/payment-success.js"],"sourcesContent":["import { useRouter } from \"next/router\";\nimport { useEffect, useState } from \"react\";\nimport { motion } from \"framer-motion\";\nimport { supabase } from \"../src/supabaseClient\";\n\nexport default function PaymentSuccess() {\n  const router = useRouter();\n  const [isRefreshing, setIsRefreshing] = useState(true);\n  const [retryCount, setRetryCount] = useState(0);\n  const MAX_RETRIES = 5;\n\n  useEffect(() => {\n    const refreshSessionAndCheck = async () => {\n      try {\n        console.log(`üîÑ Attempt ${retryCount + 1}/${MAX_RETRIES}`);\n\n        const {\n          data: { session },\n          error: sessionError,\n        } = await supabase.auth.refreshSession();\n\n        if (sessionError) throw sessionError;\n\n        const authPremium = session?.user?.user_metadata?.is_premium === true;\n\n        const { data: profile, error: profileError } = await supabase\n          .from(\"profiles\")\n          .select(\"is_premium\")\n          .eq(\"id\", session.user.id)\n          .single();\n\n        if (profileError) console.warn(\"‚ö†Ô∏è Profile check failed:\", profileError);\n\n        const profilePremium = profile?.is_premium === true;\n        const isPremium = authPremium || profilePremium;\n\n        if (isPremium) {\n          console.log(\"üéâ PREMIUM STATUS CONFIRMED!\");\n          setIsRefreshing(false);\n\n          setTimeout(() => router.push(\"/?showCard=true\"), 2000);\n        } else {\n          console.log(\"‚è≥ Not premium yet, retrying...\");\n\n          if (retryCount < MAX_RETRIES) {\n            setTimeout(() => setRetryCount((prev) => prev + 1), 3000);\n          } else {\n            console.log(\"‚ö†Ô∏è Max retries reached\");\n            setIsRefreshing(false);\n            setTimeout(() => router.push(\"/?showCard=true\"), 2000);\n          }\n        }\n      } catch (error) {\n        console.error(\"‚ùå Error:\", error);\n        setIsRefreshing(false);\n        setTimeout(() => router.push(\"/\"), 3000);\n      }\n    };\n\n    refreshSessionAndCheck();\n  }, [router, retryCount]);\n\n  return (\n    <div className=\"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-100 to-purple-50 text-center px-6\">\n      <motion.div\n        initial={{ opacity: 0, scale: 0.9 }}\n        animate={{ opacity: 1, scale: 1 }}\n        transition={{ duration: 0.4 }}\n        className=\"bg-white shadow-xl rounded-2xl p-10 max-w-md w-full border border-indigo-100\"\n      >\n        <motion.div\n          animate={{\n            rotate: isRefreshing ? 360 : 0,\n          }}\n          transition={{\n            repeat: isRefreshing ? Infinity : 0,\n            duration: 1,\n            ease: \"linear\",\n          }}\n          className=\"text-6xl mb-4\"\n        >\n          {isRefreshing ? \"üîÑ\" : \"‚úÖ\"}\n        </motion.div>\n\n        <h1 className=\"text-3xl font-semibold mb-2 text-gray-800\">\n          Payment Successful!\n        </h1>\n\n        <p className=\"text-gray-600 mb-4\">\n          {isRefreshing\n            ? \"Activating your premium features...\"\n            : \"Premium features unlocked! Redirecting...\"}\n        </p>\n\n        {isRefreshing && retryCount > 0 && (\n          <p className=\"text-sm text-gray-500 mt-2\">\n            Checking status... ({retryCount}/{MAX_RETRIES})\n          </p>\n        )}\n\n        {!isRefreshing && (\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            className=\"mt-6 text-indigo-600 font-medium\"\n          >\n            Redirecting to your dashboard...\n          </motion.div>\n        )}\n      </motion.div>\n\n    \n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;;;;;;;;;;AAEe,SAAS;IACtB,MAAM,SAAS,IAAA,oJAAS;IACxB,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,+GAAQ,EAAC;IACjD,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,+GAAQ,EAAC;IAC7C,MAAM,cAAc;IAEpB,IAAA,gHAAS,EAAC;QACR,MAAM,yBAAyB;YAC7B,IAAI;gBACF,QAAQ,GAAG,CAAC,CAAC,WAAW,EAAE,aAAa,EAAE,CAAC,EAAE,aAAa;gBAEzD,MAAM,EACJ,MAAM,EAAE,OAAO,EAAE,EACjB,OAAO,YAAY,EACpB,GAAG,MAAM,0IAAQ,CAAC,IAAI,CAAC,cAAc;gBAEtC,IAAI,cAAc,MAAM;gBAExB,MAAM,cAAc,SAAS,MAAM,eAAe,eAAe;gBAEjE,MAAM,EAAE,MAAM,OAAO,EAAE,OAAO,YAAY,EAAE,GAAG,MAAM,0IAAQ,CAC1D,IAAI,CAAC,YACL,MAAM,CAAC,cACP,EAAE,CAAC,MAAM,QAAQ,IAAI,CAAC,EAAE,EACxB,MAAM;gBAET,IAAI,cAAc,QAAQ,IAAI,CAAC,4BAA4B;gBAE3D,MAAM,iBAAiB,SAAS,eAAe;gBAC/C,MAAM,YAAY,eAAe;gBAEjC,IAAI,WAAW;oBACb,QAAQ,GAAG,CAAC;oBACZ,gBAAgB;oBAEhB,WAAW,IAAM,OAAO,IAAI,CAAC,oBAAoB;gBACnD,OAAO;oBACL,QAAQ,GAAG,CAAC;oBAEZ,IAAI,aAAa,aAAa;wBAC5B,WAAW,IAAM,cAAc,CAAC,OAAS,OAAO,IAAI;oBACtD,OAAO;wBACL,QAAQ,GAAG,CAAC;wBACZ,gBAAgB;wBAChB,WAAW,IAAM,OAAO,IAAI,CAAC,oBAAoB;oBACnD;gBACF;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,YAAY;gBAC1B,gBAAgB;gBAChB,WAAW,IAAM,OAAO,IAAI,CAAC,MAAM;YACrC;QACF;QAEA;IACF,GAAG;QAAC;QAAQ;KAAW;IAEvB,qBACE,qKAAC;QAAI,WAAU;kBACb,cAAA,qKAAC,0IAAM,CAAC,GAAG;YACT,SAAS;gBAAE,SAAS;gBAAG,OAAO;YAAI;YAClC,SAAS;gBAAE,SAAS;gBAAG,OAAO;YAAE;YAChC,YAAY;gBAAE,UAAU;YAAI;YAC5B,WAAU;;8BAEV,qKAAC,0IAAM,CAAC,GAAG;oBACT,SAAS;wBACP,QAAQ,eAAe,MAAM;oBAC/B;oBACA,YAAY;wBACV,QAAQ,eAAe,WAAW;wBAClC,UAAU;wBACV,MAAM;oBACR;oBACA,WAAU;8BAET,eAAe,OAAO;;;;;;8BAGzB,qKAAC;oBAAG,WAAU;8BAA4C;;;;;;8BAI1D,qKAAC;oBAAE,WAAU;8BACV,eACG,wCACA;;;;;;gBAGL,gBAAgB,aAAa,mBAC5B,qKAAC;oBAAE,WAAU;;wBAA6B;wBACnB;wBAAW;wBAAE;wBAAY;;;;;;;gBAIjD,CAAC,8BACA,qKAAC,0IAAM,CAAC,GAAG;oBACT,SAAS;wBAAE,SAAS;oBAAE;oBACtB,SAAS;wBAAE,SAAS;oBAAE;oBACtB,WAAU;8BACX;;;;;;;;;;;;;;;;;AASX","debugId":null}}]
}